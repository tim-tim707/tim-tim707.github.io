<!DOCTYPE html>
<html lang="en">

<head>
       <meta charset="UTF-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <title>Star Wars Episode I Racer HD remaster article</title>
       <link rel="stylesheet" href="./style.css">
       <link rel="icon" href="./favicon.ico" type="image/x-icon">

       <!-- Code Highlight -->
       <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
       <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
       <script>hljs.highlightAll();</script>

       <!-- Font Inter -->
       <link rel="preconnect" href="https://rsms.me/">
       <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
</head>

<body>
       <main>
              <div style="width: 80%; margin: 0 auto; text-align: left; font-size: 24px; line-height: 1.3;">
                     <h1>How we are making a remaster of Star Wars Episode I Racer</h1>
                     <p>
                            Star Wars Episode I Racer (SWE1R or SWR) is a 1999 racing video game. Designed to be as
                            portable as possible from its conception, it was released on
                            Windows, N64, GBC, Macintosh, Dreamcast and was later ported to Switch,
                            Playstation 4 and Xbox One. Windows multiplayer uses the IPX protocol (now deprecated),
                            while Mac uses TCP/IP.
                     </p>
                     <p>
                            The games plays well with a great sense of speed gained by crusing through the levels. It is
                            fast and the controls of the pods are really smooth. There are 25 tracks of varying length
                            and environment. The game's graphics however, are getting dated. The 640 by 480 pixels
                            resolution and the pixelated font can look blurred, and the windowing system is
                            forced in fullscreen mode which can be annoying.
                     </p>
                     <img src="original_game.png" alt="original game screenshot"
                            style="display: block; margin: 20px auto; max-width: 80%; height: auto; border-radius: 8px;">
                     <div>
                            <p style="text-align: center; font-size: 22px;">
                                   <i>Screenshot of the original game running in forced fullscreen 640 by 480 pixels</i>
                            </p>
                     </div>
                     <hr>
                     <p>
                            For years, the Star Wars Racer's community was joking about an HD remaster, while slowly
                            making progress understanding the inner workings of the game. Today, the modding
                            community has enough tools and knowledge to be able to deliver tangible graphics
                            improvements, as well as a couple of additionnal features.
                     </p>
                     <p>
                            This article is about the history and the progress of this project, as well as the people
                            that made it possible. If you are only interested about the results and want to see it with
                            your own eyes, skip ahead to
                            <a href="#section_release">this section </a>
                     </p>
                     <p>
                            We first need a bit of understanding of how the game read and display assets such as 3D
                            models and icons. When running the game, it will load 4 binary blocks for models, sprites,
                            textures and splines (tracks). Each asset is identified with an identifier. If we can
                            change these identifiers or modify how they are used, we can already do some fun stuff.
                     </p>
                     <p>
                            // examples of model swapping
                     </p>
                     <p>
                            If we can understand the binary blocks, we can even modify them to put the data we want.
                            Special thanks to Aphex and LightningPirate for their work on this. They are the ones who
                            understand the most about these files and their unique format. This is a good start
                            but we hit some limits when trying to do more ambitious things. Indeed, the game contains a
                            lot of limits for the number of triangles per 3D model, or for the maximum size of textures.
                     </p>
                     <p>
                            // Examples of modifying modelblock
                     </p>
                     <p>
                            In order to break these limits, we'll have to replace how the game display assets with our
                            own code. This is much simpler said than done, because we need to understand the inner
                            workings of the game very precisely, or it won't work at all.<br>
                            After much decompilation and reverse engineering of the game, we can finally use our own
                            windowing system and renderer, which already unlocks a resizeable window and a 1080p
                            resolution !
                     </p>
                     <img src="SWR_1080_fonts.png" alt="OpenGL renderer in action"
                            style="display: block; margin: 20px auto; max-width: 80%; height: auto; border-radius: 8px;">
                     <div>
                            <p style="text-align: center; font-size: 22px;">
                                   <i>Screenshot of the game running in windowed mode 1080p with HD fonts, with a custom
                                          OpenGL renderer</i>
                            </p>
                     </div>
                     <p>
                            How are we going to do HD graphics now ? Increasing the resolution is only the beginning. We
                            are going to replace the function responsible for drawing the objects, get the model Ids for
                            each part and filter the ones we will render with our own code. Like that, the replacement
                            is invisible from the point of view of the game, and we can swap an original game asset with
                            a 3D model of our own. This would bypass the hard-coded limits of the original game for
                            triangles and textures completely, and allow us full control of how to render our own
                            replacement models. When the game tries to render model X, we check if we have a replacement
                            for it, and if that is the case we render it instead. Simple and efficient !
                     </p>
                     <p>
                            // Example of rendering only Ids
                            // Example of model replacement with modern one.
                     </p>
                     <p>
                            Since we control the rendering of these new models, we can even add more modern graphics
                            techniques such as having the environment cast light to the model (IBL for those who are
                            interested) or normal mapping. There are a lot of new possibilities ahead !
                     </p>
                     <p>
                            // Example of a metallic sphere with normal map and IBL
                     </p>
                     <section id="section_release">
                            <h2>Download and use the 3D model replacement mod, with HD fonts.</h2>
                     </section>
                     <p>
                            Link to the release + explainations
                     </p>
                     <p>
                            The use of this mod is as simple as possible so that anyone can use it. Artists simply put
                            gltf files named properly in the correct folder, and the mod (dinput.dll file), will
                            detect the files and replace the corresponding in-game model.
                     </p>
                     <p>
                            // TODO: embed this in the article
                            Here is a list of some interesting work done by the modding community throughout the years,
                            both technical and artistic:
                            LeadPhalanx work in the official discord:
                            Pods:
                            (https://discord.com/channels/441839750555369474/441842584592056320/750149683732676618)
                            (https://discord.com/channels/441839750555369474/441842584592056320/1170504148228243527)
                            Parts:
                            (https://discord.com/channels/441839750555369474/441842584592056320/974892708621586462)
                            Cantina:
                            (https://discord.com/channels/441839750555369474/441842584592056320/1242926780533444760)
                            Gonzalo alternate backgrounds for menus:
                            (https://discord.com/channels/441839750555369474/441842584592056320/1115394508968955945)
                            Aphex proof of concept for model block repacking:
                            (https://discord.com/channels/441839750555369474/441842584592056320/1177234855227035768)
                            LP proof of concept for the blender plugin:
                            (https://discord.com/channels/441839750555369474/441842584592056320/1228847411175231558)
                            LP figuring out animations:
                            (https://discord.com/channels/441839750555369474/441842584592056320/931127492369063966)
                            Myself fixing rendering of sprites:
                            (https://discord.com/channels/441839750555369474/441842584592056320/1271203082763767859)
                            having dynamic IBL working
                            (https://discord.com/channels/441839750555369474/441842584592056320/1314366731120148561)
                            Showcasing model replacement from blender to the game:
                            (https://discord.com/channels/441839750555369474/441842584592056320/1315093398776053873)
                            Pods are weirder
                            (https://discord.com/channels/441839750555369474/441842584592056320/1320503770802688082)
                            Lego model from DigitalUnity in game:
                            (https://discord.com/channels/441839750555369474/441842584592056320/1333055639240441929)
                            All pods as lego:
                            (https://discord.com/channels/441839750555369474/441842584592056320/1337573278419779725)
                            Galeforce showcasing state saving and rollback:
                            (https://discord.com/channels/441839750555369474/441842584592056320/1206092227407904839)
                            + freecam on top of it:
                            (https://discord.com/channels/441839750555369474/441842584592056320/1214470330010042368)
                            Tool to select parts:
                            (https://discord.com/channels/441839750555369474/441842584592056320/1217498222315175937)
                            Cainwood showcasing a memory reader / writer running with the game:
                            (https://discord.com/channels/441839750555369474/441842584592056320/1213362825163055164)
                            Tilman first renderer replacement:
                            (https://discord.com/channels/441839750555369474/441842584592056320/1217587974850613428)
                            + new capabilities collision rendering and more
                            (https://discord.com/channels/441839750555369474/441842584592056320/1235310537072574585)
                            + trigger rendering
                            (https://discord.com/channels/441839750555369474/441842584592056320/1237477431854497843)
                            Ben showcasing custom menu for new tracks:
                            (https://discord.com/channels/441839750555369474/441842584592056320/1217808109754646618)
                     </p>
                     <p>
                            Of course, there is always bugs that I'll need to fix (and that already got fixed in new
                            release revisions), but I believe the project is in a good enough state to be used by anyone
                            to have custom pods and parts in Star Wars Racer.
                     </p>
                     <p>
                            If you are interested about this project, also check annodue // link to annodue, another mod
                            for speedrunners that add new capabilities and menus.
                     </p>
                     <p>
                            If you want to read about my personal experience doing this project, you can go to <a
                                   href="personal_journey.html">this article</a>
                     </p>
              </div>
       </main>
</body>

</html>
